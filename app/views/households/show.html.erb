<div class="household-show pt-2">

  <!-- title -->
  <div class="household-show-title" style=" width: 100%; padding-bottom: 16px;">
    <h1><%= @household.title %>'s</h1>
    <div class="d-flex justify-content-center">
      <h1>house</h1>
      <div class="btn btn-primary" style="border-radius: 32px; border: 1px black solid; margin-left: 8px; ">
        <%= link_to '', edit_household_path(current_user.household), class: "fa-solid fa-pen-to-square", style: "font-size: 18px;" %>
      </div>
    </div>
  </div>


  <!-- Calendar -->
  <div class="household-show-calendar" style=" width: 100%; padding-bottom: 16px;">
    <div class="accordion">
      <h1 class="mt-2" >Calendar</h1>
    </div>
    <div class="panel">
      <div class="household-show-calendar mt-3">
        <%= month_calendar(events: @all_calendar_tasks, attribute: :deadline) do |date, submissions| %>
          <div class="day">
            <%= date.day %>
            <% submissions.each  do |submission| %>
              <div class="task">

                <%= submission.user.username %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- Members -->
  <div class="household-show-members" style=" width: 100%; padding-bottom: 16px;">
    <!-- Modal Button -->
    <div class="accordion">
      <h1>Members
    </div>
    <div class="panel">
      <div class="d-flex justify-content-between mt-3">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#memberModal", style="width: 100%; border-radius: 32px; border: 1px black solid; align-content: center; margin-left: 8px; margin-right: 8px;">
          <i class="fa-solid fa-circle-plus" style="font-size: 18px; text-align: center;"></i>
        </button>
      </div>


      <!-- Modal -->
      <div class="modal fade mt-3" id="memberModal" tabindex="-1" role="dialog" aria-labelledby="memberModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="memberModalLabel">Add New Member</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <%= render '/users/form' %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>



      <div class="members">

        <div class="household-admin">
          <div class="card-product">
            <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
            <div class="card-product-infos">
              <h2 style="color: red;"><%= link_to @household.user.username, user_path(@household.user), style: "color: black;" %> - admin</h2>
              <p>Product description with <strong>relevant info</strong> only.</p>
            </div>
          </div>
        </div>
        <% @users.each do |user| %>
          <% if user.username == @household.user.username%>
          <% else %>
            <div class="card-product">
              <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
              <div class="card-product-infos">
                <h2><%= link_to user.username, user_path(user) %></h2>
                <p>Product description with <strong>relevant info</strong> only.</p>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>




  <!-- Tasks -->
  <div class="accordion">
    <div class="d-flex">
      <h1>Tasks</h1>
    </div>
  </div>
  <div class="panel">
    <!-- RENDERING FOR NOW -->
    <h1 style="color: red;">TEMPORARY RENDER</h1>

    <%= render '/households/add_tasks' %>
    <%= render '/households/view_tasks' %>


  </div>


  <script>
    var acc = document.getElementsByClassName("accordion");
    var i;

    for (i = 0; i < acc.length; i++) {
      acc[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        if (panel.style.display === "block") {
          panel.style.display = "none";
        } else {
          panel.style.display = "block";
        }
      });
    }
  </script>
